---
import BaseLayout from '../layouts/BaseLayout.astro';

import LinkSociales from '../components/LinkSociales.astro';
import About from '../components/About.astro';
import Estudios from '../components/Educacion.astro';
import Skills from '../components/Skills.astro';
import Conocimiento from '../components/Conocimiento.astro';
import Proyectos from '../components/Proyectos.astro';
import Nombre from '../components/Nombre.astro';
import Navegation from '../components/Navegation.astro';
---

<BaseLayout title="Nicolas Godoy - Desarrollador de Software">
  <div class="container">
    <aside class="left-panel">
      <div>
        <Nombre />
        <Navegation />
      </div>
      <LinkSociales />
    </aside>

    <main class="right-panel">
      <About />
      <Estudios />
      <Skills />
      <Conocimiento />
      <Proyectos />
    </main>
  </div>

  <script>
    // Smooth scrolling
    document.querySelectorAll<HTMLAnchorElement>('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', (e) => {
        e.preventDefault();

        const link = e.currentTarget as HTMLAnchorElement;
        const href = link.getAttribute('href');
        if (!href) return;

        const target = document.querySelector<HTMLElement>(href);
        if (!target) return;

        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      });
    });

    const sections = document.querySelectorAll<HTMLElement>('section');
    const navLinks = document.querySelectorAll<HTMLAnchorElement>('.navigation a');

    window.addEventListener('scroll', () => {
      let current = '';

      sections.forEach(section => {
        if (window.pageYOffset >= section.offsetTop - 200) {
          current = section.id;
        }
      });

      navLinks.forEach(link => {
        link.style.color = '#64748b';

        const href = link.getAttribute('href');
        if (href && href.slice(1) === current) {
          link.style.color = '#e4e4e7';
        }
      });
    });
  </script>
</BaseLayout>
